
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Shuffle</title>
</head>
<body>
    <h2>Select an Image</h2>
    <input type="file" id="fileInput" accept="image/*">
    <button onclick="shuffleImage()">Shuffle Image</button>

    <h2>Shuffled Image</h2>
    <img id="shuffledImage" style="max-width: 300px; display: none;">

    <script>
        // Funzione per ottenere la rappresentazione Base64 dell'immagine
        function getImageBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
                reader.readAsDataURL(file);
            });
        }

        // Funzione per mescolare una stringa
        function shuffleString(str) {
            const shuffled = str.split('').sort(() => 0.5 - Math.random()).join('');
            return shuffled;
        }

        // Funzione per ricomporre la stringa Base64 mescolata e visualizzarla come immagine
        function displayShuffledImage(shuffledBase64) {
            const img = new Image();
            img.onload = function() {
                document.getElementById('shuffledImage').src = img.src;
                document.getElementById('shuffledImage').style.display = 'block';
            };
            img.src = 'data:image/jpeg;base64,' + shuffledBase64;
        }

        // Funzione per eseguire le operazioni di scomposizione, shuffle e ricomposizione
        async function shuffleImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (!file) {
                alert("Please select a file.");
                return;
            }

            // Ottieni la rappresentazione Base64 dell'immagine
            const base64ImageData = await getImageBase64(file);

            // Mescola la stringa Base64
            const shuffledBase64 = shuffleString(base64ImageData);

            // Visualizza l'immagine ricomposta
            displayShuffledImage(shuffledBase64);
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Shuffle</title>
</head>
<body>
    <h2>Select an Image</h2>
    <input type="file" id="fileInput" accept="image/*">
    <button onclick="shuffleImage()">Shuffle Image</button>

    <h2>Shuffled Image</h2>
    <div id="imageContainer" style="max-width: 300px;"></div>

    <script>
        async function shuffleImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (!file) {
                alert("Please select a file.");
                return;
            }

            const base64ImageData = await getImageBase64(file);
            const shuffledBase64 = shuffleString(base64ImageData);
            displayShuffledImage(shuffledBase64);
        }

        function getImageBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
                reader.readAsDataURL(file);
            });
        }

        function shuffleString(str) {
            return str.split('').sort(() => 0.5 - Math.random()).join('');
        }

        function displayShuffledImage(shuffledBase64) {
            const imageContainer = document.getElementById('imageContainer');
            imageContainer.innerHTML = `<img src='data:image/jpeg;base64,${shuffledBase64}'>`;
        }
    </script>
</body>
</html>